{
  "rules": [
    {
      "id": "R_INPUT_VALID",
      "scope": "role_research",
      "if": "missing(role_label)",
      "then": "ask_clarification"
    },
    {
      "id": "R_SOURCES_OK",
      "scope": "role_research",
      "if": "role_knowledge.sources_count < 3",
      "then": "flag_low_confidence"
    },
    {
      "id": "R_JOB_CARD_STRUCTURE",
      "scope": "job_card_build",
      "if": "missing_any(['contexte','mission','responsabilites','livrables','profil','soft_skills'])",
      "then": "fail_critical"
    },
    {
      "id": "R_JOB_CARD_HUMAN",
      "scope": "job_card_build",
      "if": "too_many_bullets or trop_de_jargon",
      "then": "penalize_major"
    },
    {
      "id": "R_AGENT_FILES_COMPLETE",
      "scope": "agent_scaffold_build",
      "if": "agent_bundle.files_count < 5",
      "then": "fail_critical"
    },
    {
      "id": "R_AGENT_SCOPE_CLEAR",
      "scope": "agent_scaffold_build",
      "if": "onboarding.role_mission_too_generic",
      "then": "penalize_major"
    },
    {
      "id": "R_AGENT_REUSE_PATTERN",
      "scope": "agent_scaffold_build",
      "if": "missing_any_agent_files_like_reviewer_pattern",
      "then": "fail_critical"
    }
  ],
  "job_card_template": {
    "sections": [
      "contexte",
      "mission",
      "responsabilites",
      "livrables_cles",
      "profil",
      "competences",
      "soft_skills",
      "indicateurs_succes"
    ]
  },
  "agent_files_template": {
    "onboarding_fields": [
      "id",
      "role",
      "mission",
      "memory_file",
      "system_files",
      "pipeline",
      "constraints"
    ],
    "manifest_fields": [
      "modes",
      "mode_selection_rules",
      "output_templates"
    ],
    "best_practices_fields": [
      "rules",
      "severity_actions"
    ],
    "memory_fields": [
      "meta",
      "user_profile",
      "objects_template",
      "session"
    ],
    "usage_guide_fields": [
      "startup",
      "workflows",
      "handoff"
    ]
  }
}
